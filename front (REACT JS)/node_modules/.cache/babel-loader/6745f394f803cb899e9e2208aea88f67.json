{"ast":null,"code":"var _jsxFileName = \"/home/julien-pc/Bureau/PROJECT/e-commerce/front/src/ProductEdit.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport sha256 from \"sha256\";\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\nimport { Carousel } from \"react-responsive-carousel\";\nimport { storage } from \"./firebase\";\n\nclass ProductEdit extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      admin: null,\n      title: \"\",\n      description: \"\",\n      price: \"\",\n      availability: \"0\",\n      product: undefined,\n      photo: [],\n      submitable: true,\n      loading: \"\",\n      compteur: 0,\n      response: false\n    };\n    this.handleChange1 = this.handleChange1.bind(this);\n    this.handleChange2 = this.handleChange2.bind(this);\n    this.handleChange3 = this.handleChange3.bind(this);\n    this.handleChange4 = this.handleChange4.bind(this);\n    this.deleteImage = this.deleteImage.bind(this);\n    this.handleChangeImage = this.handleChangeImage.bind(this);\n  }\n\n  componentDidMount() {\n    const uri = window.location.href;\n    const id = uri.split(\"/\");\n    axios.get(\"http://127.0.0.1:8000/api/product/\" + id[5], {\n      mode: \"no-cors\",\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => {\n      const data = res.data;\n      this.setState({\n        product: data,\n        description: data.description,\n        price: data.price,\n        title: data.title,\n        photo: data.pictures\n      });\n    });\n\n    if (JSON.parse(localStorage.getItem(\"token\")) == null) {\n      axios.get(\"http://127.0.0.1:8000/api/loginCheck\", {\n        mode: \"no-cors\",\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => {\n        this.setState({\n          admin: res.data\n        });\n      });\n    } else {\n      axios.get(\"http://127.0.0.1:8000/api/loginCheck\", {\n        mode: \"no-cors\",\n        headers: {\n          Authorization: \"Bearer \" + sha256(JSON.parse(localStorage.getItem(\"token\"))),\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => {\n        this.setState({\n          admin: res.data\n        });\n      });\n    }\n  }\n\n  handleChange1(e) {\n    this.setState({\n      title: e.target.value,\n      response: false\n    });\n  }\n\n  handleChange2(e) {\n    this.setState({\n      description: e.target.value,\n      response: false\n    });\n  }\n\n  handleChange3(e) {\n    this.setState({\n      price: e.target.value,\n      response: false\n    });\n  }\n\n  handleChange4(e) {\n    this.setState({\n      availability: e.target.checked,\n      response: false\n    });\n  }\n\n  handleChangeImage(e) {\n    this.setState({\n      response: false\n    });\n    var self = this;\n    console.log(self);\n    var compteur = e.target.files.length;\n\n    if (e.target.files[0]) {\n      this.setState({\n        submitable: true\n      });\n\n      for (var i = 0; i < e.target.files.length; i++) {\n        const image = e.target.files[i];\n        const uploadTask = storage.ref(\"images/\".concat(image.name)).put(image);\n        uploadTask.on(\"state_changed\", snapshot => {//progress function\n        }, error => {\n          //error function\n          console.log(error);\n        }, () => {\n          var self2 = self; // complete function\n\n          storage.ref(\"images\").child(image.name).getDownloadURL().then(url => self2.SubmitApi(url)).then(url => self2.submiatble(compteur));\n        });\n      }\n    }\n  }\n\n  SubmitApi(url) {\n    var tmp = this.state.compteur;\n    tmp++;\n    this.setState({\n      compteur: tmp\n    });\n    this.setState({\n      loading: \"Please wait files are loading..\"\n    });\n    this.setState({\n      photo: [...this.state.photo, url]\n    });\n    var tab = this.state.product;\n    console.log(tab);\n    tab.pictures.push(url);\n    this.setState({\n      product: tab\n    });\n  }\n\n  submiatble(nb_img) {\n    console.log(this.state.compteur, nb_img);\n\n    if (this.state.compteur === nb_img) {\n      console.log(\"yess\");\n      this.setState({\n        submitable: true\n      });\n      this.setState({\n        loading: \"\"\n      });\n    }\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    if (this.state.submitable === true) {\n      const product = {\n        title: this.state.title,\n        description: this.state.description,\n        price: this.state.price,\n        availability: this.state.availability,\n        pictures: this.state.photo\n      };\n      console.log(product);\n      const test = window.location.href;\n      const id_prod = test.split(\"/\");\n      let uri = \"http://localhost:8000/api/edit/product/\" + id_prod[5];\n      axios.post(uri, product).then(response => {\n        console.log(response);\n\n        if (response.status === 200) {\n          this.setState({\n            response: true\n          });\n        }\n      });\n    }\n  }\n\n  deleteImage(e) {\n    var tab = this.state.photo;\n    tab.splice(tab.indexOf(e.target.value), 1);\n    this.setState({\n      photo: tab\n    });\n  }\n\n  render() {\n    const admin = this.state.admin;\n    const product = this.state.product;\n\n    if (admin === null || product === undefined || JSON.parse(localStorage.getItem(\"token\")) == null) {\n      return React.createElement(\"div\", {\n        className: \"container mt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"alert alert-danger center-alert\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }), \" Il faut \\xEAtre\", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \" administrateur\"), \" pour acc\\xE9der a cette page !\", React.createElement(\"a\", {\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, \" Retourner \\xE0 l'accueil...\"), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"close\",\n        \"data-dismiss\": \"alert\",\n        \"aria-label\": \"Close\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, \"\\xD7\"))));\n    } else if (admin === true) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(\"nav\", {\n        className: \"navbar navbar-dark bg-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"navbar-brand\",\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-shopping-cart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }), \" E-COMMERCE\")), React.createElement(\"div\", {\n        className: \"navbar-brand\",\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"nav-item\",\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }), \" Accueil\"), React.createElement(\"a\", {\n        className: \"nav-item\",\n        href: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-sign-in\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }), \" Connexion\"), React.createElement(\"a\", {\n        className: \"nav-item\",\n        href: \"/register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-user-plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }), \" Inscription\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card form mt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(Carousel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, product.pictures.map(picture => React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"img-card2\",\n        src: picture === \"\" ? \"data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22286%22%20height%3D%22180%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20286%20180%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_16b4bc3c694%20text%20%7B%20fill%3Argba(255%2C255%2C255%2C.75)%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A14pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_16b4bc3c694%22%3E%3Crect%20width%3D%22286%22%20height%3D%22180%22%20fill%3D%22%23777%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22106.3984375%22%20y%3D%2296.3%22%3E286x180%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\" : picture,\n        alt: \"Card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-danger legend  delete-img\",\n        value: picture,\n        onClick: this.deleteImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \"Supprimer\")))), React.createElement(\"form\", {\n        id: \"addform\",\n        method: \"POST\",\n        onSubmit: this.handleSubmit.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, \"Titre:\")), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"input-edit mb-3\",\n        value: this.state.title,\n        onChange: this.handleChange1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }), React.createElement(\"h5\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, \"Description:\")), React.createElement(\"textarea\", {\n        rows: \"4\",\n        cols: \"50\",\n        type: \"text\",\n        className: \"input-edit mb-3\",\n        value: this.state.description,\n        onChange: this.handleChange2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }), React.createElement(\"h5\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, \"Prix:\")), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"input-edit\",\n        value: this.state.price,\n        onChange: this.handleChange3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, \"Ajouter photos: \"), React.createElement(\"div\", {\n        class: \"input-group mb-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"custom-file\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        onChange: this.handleChangeImage,\n        type: \"file\",\n        multiple: true,\n        className: \"custom-file-input\",\n        id: \"inputGroupFile01\",\n        \"aria-describedby\": \"inputGroupFileAddon01\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        class: \"custom-file-label\",\n        for: \"inputGroupFile01\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, \"Choisir photos\"))), this.state.loading === \"\" ? \"\" : React.createElement(\"div\", {\n        className: \"alert alert-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, this.state.loading), React.createElement(\"div\", {\n        class: \"form-check\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"checkbox\",\n        class: \"mb-3 mt-4 form-check-input\",\n        onChange: this.handleChange4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        class: \"mb-3 mt-4 form-check-label checkboxStatus\",\n        for: \"exampleCheck1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }, \"Coch\\xE9 si produit en \", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, \"rupture de stock\"), \".\")), React.createElement(\"button\", {\n        type: \"submit\",\n        class: \"mt-3 btn btn-primary input-edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"icon fa fa-edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      }), \" Modifier\")), this.state.response === true ? React.createElement(\"div\", {\n        className: \"mt-3 alert alert-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, \"Votre produit a bien ete edite !\") : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      })))));\n    } else {\n      return React.createElement(\"div\", {\n        className: \"container mt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"alert alert-danger center-alert\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }), \" Il faut \\xEAtre\", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370\n        },\n        __self: this\n      }, \" administrateur\"), \" pour acc\\xE9der a cette page !\", React.createElement(\"a\", {\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }, \" Retourner \\xE0 l'accueil...\"), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"close\",\n        \"data-dismiss\": \"alert\",\n        \"aria-label\": \"Close\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, \"\\xD7\"))));\n    }\n  }\n\n}\n\nexport default ProductEdit;","map":{"version":3,"sources":["/home/julien-pc/Bureau/PROJECT/e-commerce/front/src/ProductEdit.js"],"names":["React","axios","sha256","Carousel","storage","ProductEdit","Component","constructor","props","state","admin","title","description","price","availability","product","undefined","photo","submitable","loading","compteur","response","handleChange1","bind","handleChange2","handleChange3","handleChange4","deleteImage","handleChangeImage","componentDidMount","uri","window","location","href","id","split","get","mode","headers","then","res","data","setState","pictures","JSON","parse","localStorage","getItem","Authorization","e","target","value","checked","self","console","log","files","length","i","image","uploadTask","ref","name","put","on","snapshot","error","self2","child","getDownloadURL","url","SubmitApi","submiatble","tmp","tab","push","nb_img","handleSubmit","preventDefault","test","id_prod","post","status","splice","indexOf","render","map","picture"],"mappings":"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","sourcesContent":["  import React from \"react\";\n  import axios from \"axios\";\n  import sha256 from \"sha256\";\n  import \"react-responsive-carousel/lib/styles/carousel.min.css\";\n  import { Carousel } from \"react-responsive-carousel\";\n  import { storage } from \"./firebase\";\n\n  class ProductEdit extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        admin: null,\n        title: \"\",\n        description: \"\",\n        price: \"\",\n        availability: \"0\",\n        product: undefined,\n        photo: [],\n        submitable: true,\n        loading: \"\",\n        compteur: 0,\n        response: false\n      };\n\n      this.handleChange1 = this.handleChange1.bind(this);\n      this.handleChange2 = this.handleChange2.bind(this);\n      this.handleChange3 = this.handleChange3.bind(this);\n      this.handleChange4 = this.handleChange4.bind(this);\n      this.deleteImage = this.deleteImage.bind(this);\n      this.handleChangeImage = this.handleChangeImage.bind(this);\n    }\n\n    componentDidMount() {\n      const uri = window.location.href;\n      const id = uri.split(\"/\");\n      axios\n        .get(`http://127.0.0.1:8000/api/product/` + id[5], {\n          mode: \"no-cors\",\n          headers: {\n            \"Access-Control-Allow-Origin\": \"*\",\n            \"Content-Type\": \"application/json\"\n          }\n        })\n\n        .then(res => {\n          const data = res.data;\n          this.setState({\n            product: data,\n            description: data.description,\n            price: data.price,\n            title: data.title,\n            photo: data.pictures\n          });\n        });\n\n      if (JSON.parse(localStorage.getItem(\"token\")) == null) {\n        axios\n          .get(`http://127.0.0.1:8000/api/loginCheck`, {\n            mode: \"no-cors\",\n            headers: {\n              \"Access-Control-Allow-Origin\": \"*\",\n              \"Content-Type\": \"application/json\"\n            }\n          })\n\n          .then(res => {\n            this.setState({ admin: res.data });\n          });\n      } else {\n        axios\n          .get(`http://127.0.0.1:8000/api/loginCheck`, {\n            mode: \"no-cors\",\n            headers: {\n              Authorization:\n                \"Bearer \" + sha256(JSON.parse(localStorage.getItem(\"token\"))),\n              \"Access-Control-Allow-Origin\": \"*\",\n              \"Content-Type\": \"application/json\"\n            }\n          })\n\n          .then(res => {\n            this.setState({ admin: res.data });\n          });\n      }\n    }\n\n    handleChange1(e) {\n      this.setState({\n        title: e.target.value,\n        response: false\n      });\n    }\n\n    handleChange2(e) {\n      this.setState({\n        description: e.target.value,\n        response: false\n      });\n    }\n\n    handleChange3(e) {\n      this.setState({\n        price: e.target.value,\n        response: false\n      });\n    }\n\n    handleChange4(e) {\n      this.setState({\n        availability: e.target.checked,\n        response: false\n      });\n    }\n\n    handleChangeImage(e) {\n      this.setState({\n        response: false\n      });\n      var self = this;\n      console.log(self);\n      var compteur = e.target.files.length;\n      if (e.target.files[0]) {\n        this.setState({ submitable: true });\n        for (var i = 0; i < e.target.files.length; i++) {\n          const image = e.target.files[i];\n          const uploadTask = storage.ref(`images/${image.name}`).put(image);\n          uploadTask.on(\n            \"state_changed\",\n            snapshot => {\n              //progress function\n            },\n            error => {\n              //error function\n              console.log(error);\n            },\n            () => {\n              var self2 = self;\n              // complete function\n              storage\n                .ref(\"images\")\n                .child(image.name)\n                .getDownloadURL()\n                .then(url => self2.SubmitApi(url))\n                .then(url => self2.submiatble(compteur));\n            }\n          );\n        }\n      }\n    }\n\n    SubmitApi(url) {\n      var tmp = this.state.compteur;\n      tmp++;\n      this.setState({ compteur: tmp });\n      this.setState({ loading: \"Please wait files are loading..\" });\n      this.setState({ photo: [...this.state.photo, url] });\n      var tab = this.state.product;\n      console.log(tab);\n      tab.pictures.push(url);\n\n      this.setState({ product: tab });\n    }\n\n    submiatble(nb_img) {\n      console.log(this.state.compteur, nb_img);\n      if (this.state.compteur === nb_img) {\n        console.log(\"yess\");\n        this.setState({ submitable: true });\n        this.setState({ loading: \"\" });\n      }\n    }\n\n    handleSubmit(e) {\n      e.preventDefault();\n      if (this.state.submitable === true) {\n        const product = {\n          title: this.state.title,\n          description: this.state.description,\n          price: this.state.price,\n          availability: this.state.availability,\n          pictures: this.state.photo\n        };\n\n        console.log(product);\n\n        const test = window.location.href;\n        const id_prod = test.split(\"/\");\n\n        let uri = `http://localhost:8000/api/edit/product/` + id_prod[5];\n\n        axios.post(uri, product).then(response => {\n          console.log(response);\n          if (response.status === 200) {\n            this.setState({ response: true });\n          }\n        });\n      }\n    }\n\n    deleteImage(e) {\n      var tab = this.state.photo;\n      tab.splice(tab.indexOf(e.target.value), 1);\n      this.setState({ photo: tab });\n    }\n\n    render() {\n      const { admin } = this.state;\n      const { product } = this.state;\n\n      if (\n        admin === null ||\n        product === undefined ||\n        JSON.parse(localStorage.getItem(\"token\")) == null\n      ) {\n        return (\n          <div className=\"container mt-4\">\n            <div className=\"alert alert-danger center-alert\" role=\"alert\">\n              <i className=\"fa fa-warning\" /> Il faut être\n              <strong> administrateur</strong> pour accéder a cette page !\n              <a href=\"/\"> Retourner à l'accueil...</a>\n              <button\n                type=\"button\"\n                className=\"close\"\n                data-dismiss=\"alert\"\n                aria-label=\"Close\"\n              >\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n            </div>\n          </div>\n        );\n      } else if (admin === true) {\n        return (\n          <div>\n            <nav className=\"navbar navbar-dark bg-dark\">\n              <a className=\"navbar-brand\" href=\"/\">\n                <b>\n                  <i className=\"fa fa-shopping-cart\" /> E-COMMERCE\n                </b>\n              </a>\n              <div className=\"navbar-brand\" href=\"/\">\n                <a className=\"nav-item\" href=\"/\">\n                  <i className=\"fa fa-home\" /> Accueil\n                </a>\n                <a className=\"nav-item\" href=\"/login\">\n                  <i className=\"fa fa-sign-in\" /> Connexion\n                </a>\n                <a className=\"nav-item\" href=\"/register\">\n                  <i className=\"fa fa-user-plus\" /> Inscription\n                </a>\n              </div>\n            </nav>\n            <div>\n              <div className=\"card form mt-4\">\n                <Carousel>\n                  {product.pictures.map(picture => (\n                    <div>\n                      <img\n                        className=\"img-card2\"\n                        src={\n                          picture === \"\"\n                            ? \"data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22286%22%20height%3D%22180%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20286%20180%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_16b4bc3c694%20text%20%7B%20fill%3Argba(255%2C255%2C255%2C.75)%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A14pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_16b4bc3c694%22%3E%3Crect%20width%3D%22286%22%20height%3D%22180%22%20fill%3D%22%23777%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22106.3984375%22%20y%3D%2296.3%22%3E286x180%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\"\n                            : picture\n                        }\n                        alt=\"Card\"\n                      />\n                      <button\n                        className=\"btn btn-danger legend  delete-img\"\n                        value={picture}\n                        onClick={this.deleteImage}\n                      >\n                        Supprimer\n                      </button>\n                    </div>\n                  ))}\n                </Carousel>\n                <form\n                  id=\"addform\"\n                  method=\"POST\"\n                  onSubmit={this.handleSubmit.bind(this)}\n                >\n                  <div className=\"card-body\">\n                    <h5 className=\"card-title\">\n                      <b>Titre:</b>\n                    </h5>\n                    <input\n                      type=\"text\"\n                      className=\"input-edit mb-3\"\n                      value={this.state.title}\n                      onChange={this.handleChange1}\n                    />\n                    <h5 className=\"card-title\">\n                      <b>Description:</b>\n                    </h5>\n                    <textarea\n                      rows=\"4\"\n                      cols=\"50\"\n                      type=\"text\"\n                      className=\"input-edit mb-3\"\n                      value={this.state.description}\n                      onChange={this.handleChange2}\n                    />\n                    <h5 className=\"card-title\">\n                      <b>Prix:</b>\n                    </h5>\n                    <input\n                      type=\"text\"\n                      className=\"input-edit\"\n                      value={this.state.price}\n                      onChange={this.handleChange3}\n                    />\n                    <label>Ajouter photos: </label>\n                    <div class=\"input-group mb-4\">\n                      <div class=\"custom-file\">\n                        <input\n                          onChange={this.handleChangeImage}\n                          type=\"file\"\n                          multiple\n                          className=\"custom-file-input\"\n                          id=\"inputGroupFile01\"\n                          aria-describedby=\"inputGroupFileAddon01\"\n                        />\n                        <label class=\"custom-file-label\" for=\"inputGroupFile01\">\n                          Choisir photos\n                        </label>\n                      </div>\n                    </div>\n                    {this.state.loading === \"\" ? (\n                      \"\"\n                    ) : (\n                      <div className=\"alert alert-warning\">\n                        {this.state.loading}\n                      </div>\n                    )}\n                    <div class=\"form-check\">\n                      <input\n                        type=\"checkbox\"\n                        class=\"mb-3 mt-4 form-check-input\"\n                        onChange={this.handleChange4}\n                      />\n                      <label\n                        class=\"mb-3 mt-4 form-check-label checkboxStatus\"\n                        for=\"exampleCheck1\"\n                      >\n                        Coché si produit en <strong>rupture de stock</strong>.\n                      </label>\n                    </div>\n                    <button type=\"submit\" class=\"mt-3 btn btn-primary input-edit\">\n                      <i class=\"icon fa fa-edit\" /> Modifier\n                    </button>\n                  </div>\n                  {this.state.response === true ? (\n                    <div className=\"mt-3 alert alert-success\">\n                      Votre produit a bien ete edite !\n                    </div>\n                  ) : (\n                    <div />\n                  )}\n                </form>\n              </div>\n            </div>\n          </div>\n        );\n      } else {\n        return (\n          <div className=\"container mt-4\">\n            <div className=\"alert alert-danger center-alert\" role=\"alert\">\n              <i className=\"fa fa-warning\" /> Il faut être\n              <strong> administrateur</strong> pour accéder a cette page !\n              <a href=\"/\"> Retourner à l'accueil...</a>\n              <button\n                type=\"button\"\n                className=\"close\"\n                data-dismiss=\"alert\"\n                aria-label=\"Close\"\n              >\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n            </div>\n          </div>\n        );\n      }\n    }\n  }\n  export default ProductEdit;\n"]},"metadata":{},"sourceType":"module"}