{"ast":null,"code":"var _jsxFileName = \"/home/julien-pc/Bureau/PROJECT/e-commerce/front/src/Flash.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport sha256 from \"sha256\";\nimport \"./App.css\";\nimport \"./bootstrap.min.css\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n      count: [],\n      categories: [],\n      countAvailability: [],\n      countAvailabilityT: [],\n      countUser: []\n    };\n  }\n\n  setProductCart(e) {\n    e.preventDefault();\n    const id = e.target.value;\n    axios.get(\"http://127.0.0.1:8000/api/product/\" + id, {\n      mode: \"no-cors\",\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => {\n      const data = res.data;\n      var showProducts = [];\n      var show = {\n        id: data.id,\n        title: data.title,\n        description: data.description,\n        price: data.price,\n        picture: data.pictures\n      };\n      showProducts.push(show);\n      showProducts = showProducts.concat(JSON.parse(localStorage.getItem(\"Products\") || \"[]\"));\n      console.log(showProducts);\n      localStorage.setItem(\"Products\", JSON.stringify(showProducts));\n    });\n  }\n\n  componentDidMount() {\n    if (JSON.parse(localStorage.getItem(\"token\")) == null) {\n      axios.get(\"http://127.0.0.1:8000/api/loginCheck\", {\n        mode: \"no-cors\",\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => {\n        this.setState({\n          admin: res.data\n        });\n      });\n    } else {\n      axios.get(\"http://127.0.0.1:8000/api/loginCheck\", {\n        mode: \"no-cors\",\n        headers: {\n          Authorization: \"Bearer \" + sha256(JSON.parse(localStorage.getItem(\"token\"))),\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => {\n        this.setState({\n          admin: res.data\n        });\n      });\n    }\n\n    axios.get(\"http://127.0.0.1:8000/api/products\", {\n      mode: \"no-cors\",\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => {\n      const data = res.data;\n      this.setState({\n        products: data.produits\n      });\n      this.setState({\n        count: data.count\n      });\n      this.setState({\n        countAvailability: data.countAvailability\n      });\n      this.setState({\n        countAvailabilityT: data.countAvailabilityT\n      });\n      this.setState({\n        countUser: data.countUser\n      });\n    });\n    axios.get(\"http://127.0.0.1:8000/api/categories\", {\n      mode: \"no-cors\",\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => {\n      const data = res.data;\n      this.setState({\n        categories: data\n      });\n    });\n  }\n\n  handleLogout() {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"Products\");\n  }\n\n  render() {\n    const products = this.state.products;\n    const categories = this.state.categories;\n    const count = this.state.count;\n    const countAvailability = this.state.countAvailability;\n    const countAvailabilityT = this.state.countAvailabilityT;\n    const countUser = this.state.countUser;\n    const admin = this.state.admin;\n    let button;\n    let buttonR;\n    let buttonP;\n    let adminB;\n\n    if (admin === true) {\n      adminB = React.createElement(\"a\", {\n        className: \"nav-item\",\n        href: \"/admin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-shield\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), \" Administrateur\");\n    }\n\n    if (JSON.parse(localStorage.getItem(\"token\")) !== null) {\n      buttonP = React.createElement(\"a\", {\n        className: \"nav-item\",\n        href: \"/profil\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), \" Mon profil\");\n      button = React.createElement(\"a\", {\n        className: \"nav-item\",\n        href: \"/\",\n        onClick: () => this.handleLogout(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-sign-out\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), \" D\\xE9connexion\");\n    } else {\n      button = React.createElement(\"a\", {\n        className: \"nav-item\",\n        href: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-sign-in\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }), \" Connexion\");\n      buttonR = React.createElement(\"a\", {\n        className: \"nav-item\",\n        href: \"/register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-user-plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }), \" Inscription\");\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/julien-pc/Bureau/PROJECT/e-commerce/front/src/Flash.js"],"names":["React","axios","sha256","App","Component","constructor","props","state","products","count","categories","countAvailability","countAvailabilityT","countUser","setProductCart","e","preventDefault","id","target","value","get","mode","headers","then","res","data","showProducts","show","title","description","price","picture","pictures","push","concat","JSON","parse","localStorage","getItem","console","log","setItem","stringify","componentDidMount","setState","admin","Authorization","produits","handleLogout","removeItem","render","button","buttonR","buttonP","adminB"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport sha256 from \"sha256\";\n\nimport \"./App.css\";\nimport \"./bootstrap.min.css\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      products: [],\n      count: [],\n      categories: [],\n      countAvailability: [],\n      countAvailabilityT: [],\n      countUser: []\n    };\n  }\n\n  setProductCart(e) {\n    e.preventDefault();\n    const id = e.target.value;\n\n    axios\n      .get(`http://127.0.0.1:8000/api/product/` + id, {\n        mode: \"no-cors\",\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Content-Type\": \"application/json\"\n        }\n      })\n\n      .then(res => {\n        const data = res.data;\n\n        var showProducts = [];\n\n        var show = {\n          id: data.id,\n          title: data.title,\n          description: data.description,\n          price: data.price,\n          picture: data.pictures\n        };\n\n        showProducts.push(show);\n        showProducts = showProducts.concat(\n          JSON.parse(localStorage.getItem(\"Products\") || \"[]\")\n        );\n        console.log(showProducts);\n\n        localStorage.setItem(\"Products\", JSON.stringify(showProducts));\n      });\n  }\n\n  componentDidMount() {\n    if (JSON.parse(localStorage.getItem(\"token\")) == null) {\n      axios\n        .get(`http://127.0.0.1:8000/api/loginCheck`, {\n          mode: \"no-cors\",\n          headers: {\n            \"Access-Control-Allow-Origin\": \"*\",\n            \"Content-Type\": \"application/json\"\n          }\n        })\n\n        .then(res => {\n          this.setState({ admin: res.data });\n        });\n    } else {\n      axios\n        .get(`http://127.0.0.1:8000/api/loginCheck`, {\n          mode: \"no-cors\",\n          headers: {\n            Authorization:\n              \"Bearer \" + sha256(JSON.parse(localStorage.getItem(\"token\"))),\n            \"Access-Control-Allow-Origin\": \"*\",\n            \"Content-Type\": \"application/json\"\n          }\n        })\n\n        .then(res => {\n          this.setState({ admin: res.data });\n        });\n    }\n\n    axios\n      .get(`http://127.0.0.1:8000/api/products`, {\n        mode: \"no-cors\",\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Content-Type\": \"application/json\"\n        }\n      })\n\n      .then(res => {\n        const data = res.data;\n        this.setState({ products: data.produits });\n        this.setState({ count: data.count });\n        this.setState({ countAvailability: data.countAvailability });\n        this.setState({ countAvailabilityT: data.countAvailabilityT });\n        this.setState({ countUser: data.countUser });\n      });\n\n    axios\n      .get(`http://127.0.0.1:8000/api/categories`, {\n        mode: \"no-cors\",\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Content-Type\": \"application/json\"\n        }\n      })\n\n      .then(res => {\n        const data = res.data;\n        this.setState({ categories: data });\n      });\n  }\n\n  handleLogout() {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"Products\");\n  }\n\n  render() {\n    const { products } = this.state;\n    const { categories } = this.state;\n    const { count } = this.state;\n    const { countAvailability } = this.state;\n    const { countAvailabilityT } = this.state;\n    const { countUser } = this.state;\n    const { admin } = this.state;\n    let button;\n    let buttonR;\n    let buttonP;\n    let adminB;\n\n    if (admin === true) {\n      adminB = (\n        <a className=\"nav-item\" href=\"/admin\">\n          <i className=\"fa fa-shield\" /> Administrateur\n        </a>\n      );\n    }\n\n    if (JSON.parse(localStorage.getItem(\"token\")) !== null) {\n      buttonP = (\n        <a className=\"nav-item\" href=\"/profil\">\n          <i className=\"fa fa-user\" /> Mon profil\n        </a>\n      );\n\n      button = (\n        <a className=\"nav-item\" href=\"/\" onClick={() => this.handleLogout()}>\n          <i className=\"fa fa-sign-out\" /> Déconnexion\n        </a>\n      );\n    } else {\n      button = (\n        <a className=\"nav-item\" href=\"/login\">\n          <i className=\"fa fa-sign-in\" /> Connexion\n        </a>\n      );\n      buttonR = (\n        <a className=\"nav-item\" href=\"/register\">\n          <i className=\"fa fa-user-plus\" /> Inscription\n        </a>\n      );\n    }\n\n    return (\n        <div>\n            \n        </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}